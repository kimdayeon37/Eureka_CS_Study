## 우선순위 큐 (Priority Queue)

우선순위 큐는 `우선순위가 높은 데이터가 먼저 나오는 자료구조다`  큐와 동일하게 데이터 삽입과 삭제 연산을 지원한다. 데이터 삭제 연산을 수행하면 우선순위가 가장 높은 데이터를 얻을 수 있다.

* 우선순위 큐를 구현하는 방식은 배열, 연결 리스트, 완전 이진 트리인 힙이 있다. 각 구현 방식의 시간 복잡도는 다음과 같다. `일반적으로 가장 효율적인 방식인 힙을 사용한다.`

* 배열,연결리스트 모두 삽입과 삭제에서 O(1), O(n)의 시간 복잡도를 가지지만, 힙의 경우에는 두 가지 경우 모두 $O(logn)$ 의 시간복잡도를 가진다.



### 힙

* 힙은 완전 이진 트리로, 최댓값 또는 최솟값을 빠르게 찾을 수 있는 자료구조다. 우선순위 큐를 구현하는 데 자주 사용한다.

** 최대 힙 : 부모 노드의 값이 자식 노드의 값보다 크거나 같은 완전 이진 트리이다.**
** 최소 힙 : 부모 노드의 값이 자식 노드의 값보다 작거나 같은 완전 이진 트리이다.**

![](https://velog.velcdn.com/images/gawgjiug/post/9f56d685-4215-4cbd-a7d1-c4494b881316/image.png)


1. 삽입 연산

* 힙에 데이터를 삽입할 때는 힙의 맨 끝에서 이루어진다.(맨 아래) 부모 노드와 우선순위(최댓값 또는 최솟값)를 비교해 부모 노드보다 우선순위가 높으면 위치를 바꾸면서 루트노드 까지 비교한다.

2. 삭제 연산

* 힙에서 데이터 삭제는 우선순위가 가장 높은 노드를 삭제하는 연산이다. 즉 , 루트 노드를 삭제하게 된다. 삭제한 후에는 루트 노드 자리에 힙의 마지막 노드(마지막 레벨의 가장 오른쪽 노드)를 옮긴 후 재정렬 한다.

![](https://velog.velcdn.com/images/gawgjiug/post/dad3ec65-246b-4437-8c13-9112e86d6b96/image.png)
* 루트 노드를 삭제한다. 힙의 마지막 노드를 루트 노드 자리로 옮긴다.

![](https://velog.velcdn.com/images/gawgjiug/post/6d5891c1-eb30-4d37-8edb-274e6da2b170/image.png)


![](https://velog.velcdn.com/images/gawgjiug/post/67bcd4b9-e434-4c04-8fe8-ff0e1491464d/image.png)

* 새로운 루트 노드 2와 자식 노드 2개 중에서 우선순위가 높은 자식 노드의 값(6)을 비교하여 자식 노드의 우선순위가 높으므로 위치를 바꾼다.

---

### 해시 테이블

* 해시 테이블은 하나의 키(key)에 대해 하나의 값(value)을 저장하는 형태의 자료 구조이다. 

* 키는 해시 함수를 사용해 해시를 얻을 수 있다. **해시**는 값이 저장되어 있는 해시 테이블의 인덱스를 찾을 수 있는 값이다. 

* 해시 함수에 키를 넣으면 해시 테이블에서 매칭되는 결과 값에 한번에 접근할 수 있다. 따라서 연산은 평균적으로 $O(1)$ 의 시간 복잡도를 가진다.

* 아래 이미지를 예시를 들자면, 아래와 같은 해시 테이블이 있을 때 '수영'을 해시 함수에 넣으면 4라는 해시를 얻는다. 해시는 인덱스를 의미하므로 해시 테이블에 인덱스 4에 저장된 7이라는 값을 얻을 수 있다.

![](https://velog.velcdn.com/images/gawgjiug/post/01ecf914-d9af-43f6-9203-f6b4f38e9e80/image.png)

* 하지만 해시 테이블에서는 `해시 충돌` 이라는 단점이 있다. 해시 충돌은 서로 다른 키에 대해 같은 해시가 도출되는 것을 말한다. 그러한 해시 충돌을 해결하기 위해 체이닝 혹은 개방 주소법이라는 방법론이 개발되었다.

---

#### 체이닝

* 체이닝이란 해시 충돌이 발생하면 `같은 해시가 나오는 키의 값을 연결 리스트에 저장하는 방식` 이다.

* 연결 리스트에 노드를 저장하므로 저장 공간에 대한 제약이 적다는 장점이 있지만, 하나의 해시(인덱스)에 노드가 몰릴 수 있다는 단점이 있다.)

* 위 그림 처럼 윤아와 서현은 해시테이블 내에서 같은 인덱스 값을 가지고 있지만, 연결리스트로 키값을 연결하여 해시 충돌을 방지하고 있다

* 만약 윤아를 해시 함수에 넣으면 각 노드에는 키와 값 쌍이 저장되어 있기 때문에 같은 인덱스라고 하더라도 구분이 가능한 것.

`웹 브라우저나 데이터베이스 캐시 시스템에 자주 사용 됨`

#### 개방 주소법

* 해시 충돌이 발생했을 때 해당 해시가 아닌 `비어 있는 공간에 값을 저장하는 방식` 이다. 개방 주소법에는 선형 조사법, 이차 조사법, 이중 해싱이 있다.

* 간단하게 설명해보자면,

1. 선형 조사법  : 선형 조사법은 충돌이 발생했을 때, 고정된 간격으로 다음 슬롯을 순차적으로 탐색하여 빈 슬록을 찾는 방법을 말하고 일반적으로 간격을 1로 설정된다.

2. 이차 조사법 : 이차 조사법은 충돌이 발생했을 때, 탐색 간격을 제곱 수로 증가시키는 방법이다. 즉, 첫 번째 충돌에서는 $1^2$ 두 번째 충돌에서는 $2^2$ 세 번째 충돌에서는 $3^2$ 의 간격으로 슬록을 탐색하며 빈 공간을 찾는다.

3. 이중 해싱 : 이중 해싱은 두 개의 다른 해시 함수를 사용하여 충돌이 발생했을 때, 다른 해시 함수를 한번 더 적용하는 방법을 말한다.


---

#### 예상 질문

`Q : 해시 테이블이란 무엇인지 설명해주세요.`

**A : 해시 테이블은 키와 값을 저장하는 자료구조이다. 해시 함수로 키에 대한 해시(인덱스)를 얻을 수 있는데, 해시 테이블은 $O(1)$ 이라는 빠른 시간안에 원하는 값에 접근 할 수 있다.**

`Q : 해시 충돌이 발생할 경우 어떻게 처리할 수 있나요?`

**A : 해시 충돌을 해결하려는 방법으로는 연결리스트를 이용하는 체이닝 방식과, 비어있는 공간에 값을 저장하는 개방 주소법 방식이 있습니다. 체이닝은 하나의 해시에 노드가 너무 많이 질 수 있다는 단점을 가지고 있습니다.**
